name: build-docs

on:
  push:
    branches:
      - master
    paths-ignore:
      - 'docs/**'

env:
  DOCFX_SOURCE_BRANCH_NAME: master

jobs:
  docs:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: ${{ env.DotNetVersion }}

    - uses: nikeee/docfx-action@v1.0.0
      name: Build Documentation
      with:
        args: docfx.json

    - uses: actions/checkout@v3
      with:
        clean: false
    - run: |
        git status
        git config user.name github-actions
        git config user.email github-actions@github.com
        git add docs
        git commit -m "docs: Build for ${GITHUB_SHA}"
        git push
